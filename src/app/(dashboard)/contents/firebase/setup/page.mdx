# Firebase ã®åˆæœŸè¨­å®š

> ğŸ“Œ **ã“ã®è¨˜äº‹ã§å­¦ã¶ã“ã¨**
>
> - Firebase ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
> - firebase.js ã®ä½œæˆ
> - ç’°å¢ƒå¤‰æ•°ã®èª­ã¿è¾¼ã¿

## Firebase ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install firebase
```

## firebase.js ã‚’ä½œæˆ

**src/lib/firebase.js**

```javascript
import { initializeApp } from "firebase/app";
import { getFirestore } from "firebase/firestore";
import { getAuth } from "firebase/auth";
import { getStorage } from "firebase/storage";

const firebaseConfig = {
  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,
  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,
  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,
  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,
  appId: import.meta.env.VITE_FIREBASE_APP_ID,
};

// Firebase ã®åˆæœŸåŒ–
const app = initializeApp(firebaseConfig);

// å„ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
export const db = getFirestore(app);
export const auth = getAuth(app);

export const storage = getStorage(app);
```

> ğŸ’¡ **`import.meta.env` ã¨ã¯ï¼Ÿ**
>
> Vite ã§ã¯ `import.meta.env` ã‚’ä½¿ã£ã¦ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã¿ã¾ã™ã€‚
> `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã« `VITE_` ã§å§‹ã¾ã‚‹å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹ã¨ã€ã“ã“ã‹ã‚‰å‚ç…§ã§ãã¾ã™ã€‚

### å„ã‚µãƒ¼ãƒ“ã‚¹ã®å½¹å‰²

| ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ | ã‚µãƒ¼ãƒ“ã‚¹       | ç”¨é€”         |
| ------------ | -------------- | ------------ |
| `db`         | Firestore      | ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ |
| `auth`       | Authentication | èªè¨¼         |
| `storage`    | Storage        | ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ |

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
src/
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ firebase.js      # Firebase è¨­å®š
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.js       # èªè¨¼ãƒ•ãƒƒã‚¯
â”‚   â””â”€â”€ useTodos.js      # Firestore ãƒ•ãƒƒã‚¯
â”œâ”€â”€ components/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ AuthContext.jsx  # èªè¨¼ Context
â”œâ”€â”€ App.jsx
â””â”€â”€ main.jsx
```

## å‹•ä½œç¢ºèª

**App.jsx** ã§ç°¡å˜ã«ãƒ†ã‚¹ãƒˆï¼š

```jsx
import { db } from "./lib/firebase";
import { collection, getDocs } from "firebase/firestore";
import { useEffect } from "react";

function App() {
  useEffect(() => {
    const test = async () => {
      try {
        const snapshot = await getDocs(collection(db, "test"));
        console.log("Firebase æ¥ç¶šæˆåŠŸï¼");
        console.log("ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•°:", snapshot.docs.length);
      } catch (error) {
        console.error("Firebase æ¥ç¶šã‚¨ãƒ©ãƒ¼:", error);
      }
    };
    test();
  }, []);

  return <h1>Firebase ãƒ†ã‚¹ãƒˆ</h1>;
}

export default App;
```

ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã€ŒFirebase æ¥ç¶šæˆåŠŸï¼ã€ã¨è¡¨ç¤ºã•ã‚Œã‚Œã° OKï¼

## ç’°å¢ƒå¤‰æ•°ãŒèª­ã¿è¾¼ã‚ãªã„å ´åˆ

### ç¢ºèªãƒã‚¤ãƒ³ãƒˆ

1. `.env` ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®**ãƒ«ãƒ¼ãƒˆ**ã«ã‚ã‚‹ã‹
2. ç’°å¢ƒå¤‰æ•°ãŒ `VITE_` ã§å§‹ã¾ã£ã¦ã„ã‚‹ã‹
3. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’**å†èµ·å‹•**ã—ãŸã‹

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢ã—ã¦å†èµ·å‹•
npm run dev
```

## ã¾ã¨ã‚

- `npm install firebase` ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- `src/lib/firebase.js` ã§ Firebase ã‚’åˆæœŸåŒ–
- **ç’°å¢ƒå¤‰æ•°**ã§è¨­å®šæƒ…å ±ã‚’ç®¡ç†
- `db`, `auth`, `storage` ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

## ğŸ¯ ã‚„ã£ã¦ã¿ã‚ˆã†

> ğŸ’¡ **ãƒŸãƒ‹æ¼”ç¿’**
>
> 1. `src/lib/firebase.js` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãã ã•ã„
> 2. å‹•ä½œç¢ºèªã‚³ãƒ¼ãƒ‰ã‚’ `App.jsx` ã«è¿½åŠ ã—ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã€ŒFirebase æ¥ç¶šæˆåŠŸï¼ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†
> 3. ã‚‚ã—ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã‚‰ã€`.env` ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã¨é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®å†èµ·å‹•ã‚’ç¢ºèªã—ã¦ãã ã•ã„
>
> **ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼**: `VITE_` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ãŒãªã„ã€é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•ã—ã¦ã„ãªã„

---

## ğŸ”— æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

åˆæœŸè¨­å®šãŒã§ããŸã‚‰ã€[Firestore ã®åŸºç¤](./05-03_Firestoreã®åŸºç¤.md) ã«é€²ã¿ã¾ã—ã‚‡ã†ï¼
