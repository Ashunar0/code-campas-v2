# Server Components ã¨ Client Components

## ã“ã®è¨˜äº‹ã§å­¦ã¶ã“ã¨

- Server Component ã¨ã¯
- Client Component ã¨ã¯
- "use client" ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–
- ã©ã¡ã‚‰ã‚’ä½¿ã†ã¹ãã‹

---

## Server Component ã¨ã¯ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰

Next.js ã® App Router ã§ã¯ã€**ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ Server Component** ã§ã™ã€‚

```jsx
// app/page.jsxï¼ˆServer Componentï¼‰
export default function Home() {
  // ã‚µãƒ¼ãƒãƒ¼ã§å®Ÿè¡Œã•ã‚Œã‚‹
  console.log("ã‚µãƒ¼ãƒãƒ¼ã§å®Ÿè¡Œ");
  
  return <h1>Hello</h1>;
}
```

### Server Component ã®ç‰¹å¾´

```
âœ… ã‚µãƒ¼ãƒãƒ¼ã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹
âœ… ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºãŒå°ã•ã„
âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
âœ… ç§˜å¯†æƒ…å ±ã‚’å®‰å…¨ã«æ‰±ãˆã‚‹
âŒ useState, useEffect ã¯ä½¿ãˆãªã„
âŒ onClick ãªã©ã®ã‚¤ãƒ™ãƒ³ãƒˆã¯ä½¿ãˆãªã„
âŒ ãƒ–ãƒ©ã‚¦ã‚¶ API ã¯ä½¿ãˆãªã„
```

---

## Client Component ã¨ã¯

ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªæ©Ÿèƒ½ï¼ˆStateã€ã‚¤ãƒ™ãƒ³ãƒˆï¼‰ã‚’ä½¿ã†ã«ã¯ **Client Component** ãŒå¿…è¦ã§ã™ã€‚

```jsx
// components/Counter.jsxï¼ˆClient Componentï¼‰
"use client";

import { useState } from 'react';

export default function Counter() {
  const [count, setCount] = useState(0);
  
  return (
    <button onClick={() => setCount(count + 1)}>
      ã‚¯ãƒªãƒƒã‚¯: {count}
    </button>
  );
}
```

### "use client" ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–

ãƒ•ã‚¡ã‚¤ãƒ«ã®å…ˆé ­ã« `"use client"` ã‚’æ›¸ãã¨ã€ãã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ Client Component ã«ãªã‚Šã¾ã™ã€‚

---

## ã©ã¡ã‚‰ã‚’ä½¿ã†ã¹ãã‹

### Server Component ã‚’ä½¿ã†å ´åˆ

```
â”œâ”€â”€ ãƒ‡ãƒ¼ã‚¿ã®è¡¨ç¤ºã®ã¿
â”œâ”€â”€ é™çš„ãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„
â”œâ”€â”€ SEO ãŒé‡è¦
â””â”€â”€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’é‡è¦–
```

### Client Component ã‚’ä½¿ã†å ´åˆ

```
â”œâ”€â”€ useState, useEffect ã‚’ä½¿ã†
â”œâ”€â”€ onClick ãªã©ã®ã‚¤ãƒ™ãƒ³ãƒˆ
â”œâ”€â”€ ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›
â”œâ”€â”€ ãƒ–ãƒ©ã‚¦ã‚¶ APIï¼ˆlocalStorage ãªã©ï¼‰
â””â”€â”€ ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
```

---

## ä½¿ã„åˆ†ã‘ã®ä¾‹

### ãƒšãƒ¼ã‚¸å…¨ä½“ã‚’ Server Component ã«

```jsx
// app/blog/[id]/page.jsxï¼ˆServer Componentï¼‰
import LikeButton from '@/components/LikeButton';

export default async function BlogPost({ params }) {
  // ã‚µãƒ¼ãƒãƒ¼ã§ãƒ‡ãƒ¼ã‚¿å–å¾—
  const post = await getPost(params.id);
  
  return (
    <article>
      <h1>{post.title}</h1>
      <p>{post.content}</p>
      {/* ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªéƒ¨åˆ†ã ã‘ Client */}
      <LikeButton postId={post.id} />
    </article>
  );
}
```

```jsx
// components/LikeButton.jsxï¼ˆClient Componentï¼‰
"use client";

import { useState } from 'react';

export default function LikeButton({ postId }) {
  const [liked, setLiked] = useState(false);
  
  return (
    <button onClick={() => setLiked(!liked)}>
      {liked ? 'â¤ï¸' : 'ğŸ¤'}
    </button>
  );
}
---

## ğŸ¯ Try: Counter ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆ

1. `components/Counter.jsx` ã‚’ä½œæˆï¼ˆä¸Šã®ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’å‚è€ƒã«ï¼‰
2. `"use client"` ã‚’å¿˜ã‚Œãšã«è¨˜è¿°
3. ãƒšãƒ¼ã‚¸ã«é…ç½®ã—ã¦ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

### ã‚ˆãã‚ã‚‹é–“é•ã„

`"use client"` ã‚’æ›¸ãå¿˜ã‚Œã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ï¼š

```
Error: useState can only be used in a Client Component.
Add the "use client" directive at the top of the file.
```

---

## ã¾ã¨ã‚

```
Server Componentï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ï¼š
â”œâ”€â”€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ã„
â”œâ”€â”€ ãƒ‡ãƒ¼ã‚¿å–å¾—ã«æœ€é©
â””â”€â”€ ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ä¸å¯

Client Componentï¼ˆ"use client"ï¼‰ï¼š
â”œâ”€â”€ useState, useEffect ãŒä½¿ãˆã‚‹
â”œâ”€â”€ ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãŒä½¿ãˆã‚‹
â””â”€â”€ å¿…è¦ãªéƒ¨åˆ†ã ã‘ã«é©ç”¨
```

---

## æ¬¡ã®è¨˜äº‹ã¸

[07-08. Server Component ã§ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ](./07-08_ServerComponentã§ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒ.md)
