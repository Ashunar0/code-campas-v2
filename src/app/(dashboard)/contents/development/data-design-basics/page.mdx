# データ設計の基礎

## この記事で学ぶこと

- データ設計とは
- Firestore の特性
- 設計のポイント

---

## データ設計とは

**データ設計**は、アプリで扱うデータの構造を決めることです。

```
決めること：
├── どんなデータを保存するか
├── データの形式（フィールド）
├── データ間の関係
└── どこに保存するか
```

---

## Firestore の特性

### コレクションとドキュメント

```
Firestore の構造：
├── users（コレクション）
│   ├── user1（ドキュメント）
│   │   ├── name: "田中"
│   │   └── email: "tanaka@example.com"
│   └── user2（ドキュメント）
│       ├── name: "佐藤"
│       └── email: "sato@example.com"
└── todos（コレクション）
    └── ...
```

### RDB との違い

> 💡 **RDB（Relational Database）** は、テーブル形式でデータを管理するデータベースで、SQL を使って操作します（例：MySQL、PostgreSQL）。**NoSQL** は、より柔軟な構造でデータを管理でき、Firestore もその一種です。

| 項目 | RDB（SQL） | Firestore（NoSQL） |
|:----|:---------|:-----------------|
| 構造 | テーブル | コレクション/ドキュメント |
| JOIN | 可能 | 基本的に不可 |
| スキーマ | 固定 | 柔軟 |
| スケール | 垂直 | 水平 |

---

## 💡 Try: データの洗い出しをしよう

あなたのアプリで必要なデータを3つ挙げてみましょう。

例：「ユーザー情報」「投稿データ」「いいねデータ」

---

## 設計のポイント

### 1. フラットな構造を推奨

深いネストは避け、フラットに保つ。

### 2. userId を含める

ユーザーごとのデータには `userId` を含める。

### 3. タイムスタンプを含める

```
createdAt: サーバータイムスタンプ
updatedAt: サーバータイムスタンプ
```

---

## まとめ

この記事では、データ設計の基礎を学びました。

- データ設計は**アプリで扱うデータの構造**を決めること
- Firestore は **コレクション/ドキュメント** 構造
- **フラットな構造**を推奨し、`userId` と **タイムスタンプ**を含める

---

## 次の記事へ

[08-09. Firestore のデータ構造を設計する](./08-09_Firestoreのデータ構造を設計する.md)
