
> ğŸ“Œ **ã“ã®è¨˜äº‹ã§å­¦ã¶ã“ã¨**
>
> - å®Ÿè·µçš„ãª CRUD ãƒ‘ã‚¿ãƒ¼ãƒ³
> - ãƒ¦ãƒ‹ãƒ¼ã‚¯ ID ã®ç”Ÿæˆ
> - æ¥½è¦³çš„ UI æ›´æ–°
> - ã‚ˆãã‚ã‚‹å‡¦ç†ã®æŠ½è±¡åŒ–

## å®Ÿè·µçš„ãª CRUD é–¢æ•°

```jsx
const [todos, setTodos] = useState([]);

// Create
const addTodo = (text) => {
  const newTodo = {
    id: crypto.randomUUID(), // ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªID
    text,
    done: false,
    createdAt: Date.now(),
  };
  setTodos([...todos, newTodo]);
};

// Updateï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰
const updateTodo = (id, updates) => {
  setTodos(
    todos.map((todo) => (todo.id === id ? { ...todo, ...updates } : todo))
  );
};

// Delete
const deleteTodo = (id) => {
  setTodos(todos.filter((todo) => todo.id !== id));
};
```

## ãƒ¦ãƒ‹ãƒ¼ã‚¯ ID ã®ç”Ÿæˆ

### æ–¹æ³• 1: Date.now()

```javascript
const id = Date.now();
// â†’ 1702000000000
```

ã‚·ãƒ³ãƒ—ãƒ«ã ãŒã€åŒæ™‚ã«è¤‡æ•°ä½œæˆã™ã‚‹ã¨é‡è¤‡ã®å¯èƒ½æ€§ã‚ã‚Šã€‚

### æ–¹æ³• 2: crypto.randomUUID()ï¼ˆæ¨å¥¨ï¼‰

```javascript
const id = crypto.randomUUID();
// â†’ "550e8400-e29b-41d4-a716-446655440000"
```

ç¢ºå®Ÿã«ãƒ¦ãƒ‹ãƒ¼ã‚¯ã€‚ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ã§åˆ©ç”¨å¯èƒ½ã€‚

### æ–¹æ³• 3: ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼

```javascript
let nextId = 1;

const addItem = (text) => {
  setItems([...items, { id: nextId++, text }]);
};
```

ã‚·ãƒ³ãƒ—ãƒ«ã ãŒã€ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰ã§ãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹ã€‚

## ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½

```jsx
const [filter, setFilter] = useState("all");

// æ´¾ç”ŸState
const filteredTodos = todos.filter((todo) => {
  switch (filter) {
    case "active":
      return !todo.done;
    case "completed":
      return todo.done;
    default:
      return true;
  }
});

// UI
<div>
  <button onClick={() => setFilter("all")}>ã™ã¹ã¦</button>
  <button onClick={() => setFilter("active")}>æœªå®Œäº†</button>
  <button onClick={() => setFilter("completed")}>å®Œäº†</button>
</div>

<ul>
  {filteredTodos.map((todo) => (
    <li key={todo.id}>{todo.text}</li>
  ))}
</ul>
```

## æ¤œç´¢æ©Ÿèƒ½

```jsx
const [searchTerm, setSearchTerm] = useState("");

const searchedTodos = todos.filter((todo) =>
  todo.text.toLowerCase().includes(searchTerm.toLowerCase())
);

// UI
<input
  type="text"
  placeholder="æ¤œç´¢..."
  value={searchTerm}
  onChange={(e) => setSearchTerm(e.target.value)}
/>;
```

## ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ + æ¤œç´¢ã®çµ„ã¿åˆã‚ã›

```jsx
const visibleTodos = todos
  .filter((todo) => {
    // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
    if (filter === "active") return !todo.done;
    if (filter === "completed") return todo.done;
    return true;
  })
  .filter((todo) => {
    // æ¤œç´¢
    return todo.text.toLowerCase().includes(searchTerm.toLowerCase());
  });
```

## ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½

```jsx
const [sortBy, setSortBy] = useState("createdAt");
const [sortOrder, setSortOrder] = useState("desc");

const sortedTodos = [...todos].sort((a, b) => {
  if (sortOrder === "asc") {
    return a[sortBy] > b[sortBy] ? 1 : -1;
  } else {
    return a[sortBy] < b[sortBy] ? 1 : -1;
  }
});
```

## æ¥½è¦³çš„ UI æ›´æ–°

API ã‚’å‘¼ã¶å‰ã«**å…ˆã« UI ã‚’æ›´æ–°**ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚

```jsx
const deleteTodo = async (id) => {
  // 1. å…ˆã« UI ã‚’æ›´æ–°ï¼ˆæ¥½è¦³çš„ï¼‰
  setTodos(todos.filter((t) => t.id !== id));

  try {
    // 2. API ã‚’å‘¼ã¶
    await fetch(`/api/todos/${id}`, { method: "DELETE" });
  } catch (error) {
    // 3. å¤±æ•—ã—ãŸã‚‰æˆ»ã™
    console.error("å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ");
    // å…ƒã«æˆ»ã™å‡¦ç†...
  }
};
```

### ãƒ¡ãƒªãƒƒãƒˆ

- ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãŒè‰¯ã„ï¼ˆå³åº§ã«åæ˜ ï¼‰
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å¾…ãŸãªãã¦è‰¯ã„

> ğŸ’¡ **ãªãœã€Œæ¥½è¦³çš„ã€ï¼Ÿ**
> ã€ŒAPI ã¯æˆåŠŸã™ã‚‹ã ã‚ã†ã€ã¨æ¥½è¦³çš„ã«ä»®å®šã—ã¦ã€**å…ˆã« UI ã‚’æ›´æ–°**ã™ã‚‹ã‹ã‚‰ã§ã™ã€‚
> å¤±æ•—ã—ãŸã‚‰å…ƒã«æˆ»ã™ï¼ˆãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰ã€ã¨ã„ã†è€ƒãˆæ–¹ã§ã™ã€‚

### æ³¨æ„ç‚¹

- å¤±æ•—æ™‚ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’å®Ÿè£…ã™ã‚‹å¿…è¦ãŒã‚ã‚‹

## ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã§æŠ½è±¡åŒ–

```jsx
function useTodos(initialTodos = []) {
  const [todos, setTodos] = useState(initialTodos);

  const addTodo = (text) => {
    setTodos([
      ...todos,
      { id: crypto.randomUUID(), text, done: false, createdAt: Date.now() },
    ]);
  };

  const updateTodo = (id, updates) => {
    setTodos(todos.map((t) => (t.id === id ? { ...t, ...updates } : t)));
  };

  const toggleTodo = (id) => {
    setTodos(todos.map((t) => (t.id === id ? { ...t, done: !t.done } : t)));
  };

  const deleteTodo = (id) => {
    setTodos(todos.filter((t) => t.id !== id));
  };

  return {
    todos,
    addTodo,
    updateTodo,
    toggleTodo,
    deleteTodo,
  };
}

// ä½¿ç”¨ä¾‹
function App() {
  const { todos, addTodo, toggleTodo, deleteTodo } = useTodos();
  // ...
}
```

## ã¾ã¨ã‚

- **crypto.randomUUID()** ã§ãƒ¦ãƒ‹ãƒ¼ã‚¯ ID ã‚’ç”Ÿæˆ
- **filter** ã¨ **æ¤œç´¢**ã‚’çµ„ã¿åˆã‚ã›ã‚‹
- **æ¥½è¦³çš„ UI æ›´æ–°**ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“å‘ä¸Š
- **ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯**ã§ãƒ­ã‚¸ãƒƒã‚¯ã‚’å†åˆ©ç”¨å¯èƒ½ã«

## ç·´ç¿’å•é¡Œ

ä»¥ä¸‹ã®ä»•æ§˜ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ + ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

1. å•†å“ãƒªã‚¹ãƒˆï¼ˆ`name`, `price`, `category`ï¼‰
2. ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆã€Œã™ã¹ã¦ã€ã€Œé£Ÿå“ã€ã€Œé›‘è²¨ã€ï¼‰
3. ä¾¡æ ¼é †ã‚½ãƒ¼ãƒˆï¼ˆé«˜ã„é † / ä½ã„é †ï¼‰

### å›ç­”ä¾‹

```jsx
const [products] = useState([
  { id: 1, name: "ã‚Šã‚“ã”", price: 100, category: "é£Ÿå“" },
  { id: 2, name: "ãƒãƒ¼ãƒˆ", price: 200, category: "é›‘è²¨" },
  { id: 3, name: "ãƒ‘ãƒ³", price: 150, category: "é£Ÿå“" },
]);
const [category, setCategory] = useState("all");
const [sortOrder, setSortOrder] = useState("asc");

const visibleProducts = products
  .filter((p) => category === "all" || p.category === category)
  .sort((a, b) =>
    sortOrder === "asc" ? a.price - b.price : b.price - a.price
  );
```

---

## ğŸ”— æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

CRUD ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒã‚ã‹ã£ãŸã‚‰ã€ãƒ¢ãƒ¼ãƒ€ãƒ«ã®å®Ÿè£… ã«é€²ã¿ã¾ã—ã‚‡ã†ï¼
