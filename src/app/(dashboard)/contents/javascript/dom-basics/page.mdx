# DOM æ“ä½œã®åŸºç¤ã€ä»»æ„ã€‘

> ğŸ“Œ **ã“ã®è¨˜äº‹ã§å­¦ã¶ã“ã¨**
>
> - DOM ã¨ã¯ä½•ã‹
> - è¦ç´ ã®å–å¾—
> - è¦ç´ ã®ä½œæˆãƒ»è¿½åŠ 
> - ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼

> ğŸ’¡ ã“ã®è¨˜äº‹ã¯**ä»»æ„**ã§ã™ã€‚React ã§ã¯ç›´æ¥ DOM æ“ä½œã‚’ã—ãªã„ãŸã‚ã€å‚è€ƒç¨‹åº¦ã«ç†è§£ã—ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

## DOM ã¨ã¯ï¼Ÿ

**DOM**ï¼ˆDocument Object Modelï¼‰ã¯ã€HTML ã‚’ JavaScript ã‹ã‚‰æ“ä½œã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã§ã™ã€‚

HTML ã®å„è¦ç´ ã‚’ã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã¨ã—ã¦æ‰±ã„ã€å–å¾—ãƒ»å¤‰æ›´ãƒ»è¿½åŠ ãƒ»å‰Šé™¤ãŒã§ãã¾ã™ã€‚

<!--
ğŸ“¸ ç”»åƒãƒ¡ãƒ¢: DOM ãƒ„ãƒªãƒ¼ã®å›³è§£
- html â†’ head, body
- body â†’ div, p, button ãªã©
- ãƒ„ãƒªãƒ¼æ§‹é€ ã§è¡¨ç¾
-->

## è¦ç´ ã®å–å¾—

### getElementById

ID ã§è¦ç´ ã‚’å–å¾—ã—ã¾ã™ã€‚

```javascript
const heading = document.getElementById("main-title");
console.log(heading);
```

```html
<h1 id="main-title">ã‚¿ã‚¤ãƒˆãƒ«</h1>
```

### querySelector

CSS ã‚»ãƒ¬ã‚¯ã‚¿ã§æœ€åˆã® 1 ã¤ã‚’å–å¾—ã—ã¾ã™ã€‚

```javascript
// ID
const heading = document.querySelector("#main-title");

// ã‚¯ãƒ©ã‚¹
const button = document.querySelector(".btn");

// ã‚¿ã‚°
const paragraph = document.querySelector("p");

// è¤‡åˆã‚»ãƒ¬ã‚¯ã‚¿
const item = document.querySelector(".container .item");
```

### querySelectorAll

CSS ã‚»ãƒ¬ã‚¯ã‚¿ã§**ã™ã¹ã¦**å–å¾—ã—ã¾ã™ã€‚

```javascript
const buttons = document.querySelectorAll(".btn");

// NodeListï¼ˆé…åˆ—ã®ã‚ˆã†ãªã‚‚ã®ï¼‰ãŒè¿”ã‚‹
buttons.forEach((btn) => {
  console.log(btn);
});
```

## è¦ç´ ã®å†…å®¹ã‚’å¤‰æ›´

### textContent

ãƒ†ã‚­ã‚¹ãƒˆã‚’å¤‰æ›´ã—ã¾ã™ã€‚

```javascript
const heading = document.getElementById("title");
heading.textContent = "æ–°ã—ã„ã‚¿ã‚¤ãƒˆãƒ«";
```

### innerHTML

HTML ã‚’å«ã‚ã¦å¤‰æ›´ã—ã¾ã™ã€‚

```javascript
const container = document.getElementById("content");
container.innerHTML = "<p>æ–°ã—ã„<strong>å†…å®¹</strong></p>";
```

> âš ï¸ ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’ `innerHTML` ã«å…¥ã‚Œã‚‹ã¨ XSS æ”»æ’ƒã®ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚`textContent` ã‚’ä½¿ã†ã‹ã€ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†ã‚’è¡Œã„ã¾ã—ã‚‡ã†ã€‚

## ã‚¹ã‚¿ã‚¤ãƒ«ã‚’å¤‰æ›´

### style ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

```javascript
const box = document.getElementById("box");
box.style.backgroundColor = "blue";
box.style.color = "white";
box.style.padding = "20px";
```

### classList

ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ãƒ»å‰Šé™¤ã—ã¾ã™ã€‚

```javascript
const button = document.getElementById("btn");

// ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ 
button.classList.add("active");

// ã‚¯ãƒ©ã‚¹ã‚’å‰Šé™¤
button.classList.remove("active");

// ã‚¯ãƒ©ã‚¹ã‚’ãƒˆã‚°ãƒ«ï¼ˆã‚ã‚Œã°å‰Šé™¤ã€ãªã‘ã‚Œã°è¿½åŠ ï¼‰
button.classList.toggle("active");

// ã‚¯ãƒ©ã‚¹ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
if (button.classList.contains("active")) {
  console.log("ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§ã™");
}
```

## è¦ç´ ã®ä½œæˆãƒ»è¿½åŠ 

### createElement + appendChild

```javascript
// æ–°ã—ã„è¦ç´ ã‚’ä½œæˆ
const newParagraph = document.createElement("p");
newParagraph.textContent = "æ–°ã—ã„æ®µè½ã§ã™";
newParagraph.className = "new-text";

// è¦ªè¦ç´ ã«è¿½åŠ 
const container = document.getElementById("container");
container.appendChild(newParagraph);
```

### insertAdjacentHTML

```javascript
const container = document.getElementById("container");

// æœ«å°¾ã«è¿½åŠ 
container.insertAdjacentHTML("beforeend", "<p>æ–°ã—ã„æ®µè½</p>");

// å…ˆé ­ã«è¿½åŠ 
container.insertAdjacentHTML("afterbegin", "<p>æ–°ã—ã„æ®µè½</p>");
```

## è¦ç´ ã®å‰Šé™¤

```javascript
const element = document.getElementById("target");

// è‡ªåˆ†è‡ªèº«ã‚’å‰Šé™¤
element.remove();

// å­è¦ç´ ã‚’å‰Šé™¤
const parent = document.getElementById("container");
parent.removeChild(element);
```

## ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œï¼ˆã‚¯ãƒªãƒƒã‚¯ã€å…¥åŠ›ãªã©ï¼‰ã«åå¿œã™ã‚‹å‡¦ç†ã‚’è¨­å®šã—ã¾ã™ã€‚

### addEventListener

```javascript
const button = document.getElementById("btn");

button.addEventListener("click", () => {
  console.log("ã‚¯ãƒªãƒƒã‚¯ã•ã‚Œã¾ã—ãŸ");
});
```

### ã‚ˆãä½¿ã†ã‚¤ãƒ™ãƒ³ãƒˆ

| ã‚¤ãƒ™ãƒ³ãƒˆ  | ç™ºç”Ÿã‚¿ã‚¤ãƒŸãƒ³ã‚° |
| --------- | -------------- |
| click     | ã‚¯ãƒªãƒƒã‚¯       |
| submit    | ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡   |
| input     | å…¥åŠ›ä¸­         |
| change    | å…¥åŠ›ç¢ºå®šæ™‚     |
| keydown   | ã‚­ãƒ¼ã‚’æŠ¼ã—ãŸ   |
| keyup     | ã‚­ãƒ¼ã‚’é›¢ã—ãŸ   |
| mouseover | ãƒã‚¦ã‚¹ãŒä¹—ã£ãŸ |
| mouseout  | ãƒã‚¦ã‚¹ãŒé›¢ã‚ŒãŸ |

### ã‚¤ãƒ™ãƒ³ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

```javascript
button.addEventListener("click", (event) => {
  console.log(event.target); // ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸè¦ç´ 
  console.log(event.type); // ã‚¤ãƒ™ãƒ³ãƒˆã®ç¨®é¡
});
```

### ãƒ•ã‚©ãƒ¼ãƒ ã®é€ä¿¡

```javascript
const form = document.getElementById("myForm");

form.addEventListener("submit", (event) => {
  event.preventDefault(); // ãƒšãƒ¼ã‚¸ã®ãƒªãƒ­ãƒ¼ãƒ‰ã‚’é˜²ã

  const input = document.getElementById("nameInput");
  console.log(input.value);
});
```

## å±æ€§ã®æ“ä½œ

```javascript
const image = document.querySelector("img");

// å±æ€§ã‚’å–å¾—
console.log(image.getAttribute("src"));

// å±æ€§ã‚’è¨­å®š
image.setAttribute("src", "new-image.jpg");
image.setAttribute("alt", "æ–°ã—ã„ç”»åƒ");

// å±æ€§ã‚’å‰Šé™¤
image.removeAttribute("alt");
```

## React ã§ã¯ DOM æ“ä½œã—ãªã„

React ã§ã¯ã€ç›´æ¥ DOM ã‚’æ“ä½œã™ã‚‹ã“ã¨ã¯ã»ã¨ã‚“ã©ã‚ã‚Šã¾ã›ã‚“ã€‚

```javascript
// âŒ React ã§ã¯ä½¿ã‚ãªã„
document.getElementById("title").textContent = "æ–°ã—ã„ã‚¿ã‚¤ãƒˆãƒ«";

// â­• React ã®æ›¸ãæ–¹
const [title, setTitle] = useState("ã‚¿ã‚¤ãƒˆãƒ«");
setTitle("æ–°ã—ã„ã‚¿ã‚¤ãƒˆãƒ«");
```

React ã¯ã€ŒçŠ¶æ…‹ã€ã‚’å¤‰æ›´ã™ã‚‹ã¨ã€è‡ªå‹•ã§ DOM ã‚’æ›´æ–°ã—ã¦ãã‚Œã¾ã™ã€‚
ã“ã‚ŒãŒ React ã®ãƒ¡ãƒªãƒƒãƒˆã§ã™ï¼

## DevTools ã§ DOM ã‚’ç¢ºèªã—ã‚ˆã†

ãƒ–ãƒ©ã‚¦ã‚¶ã® DevTools ã® **Elements** ã‚¿ãƒ–ã§ã€DOM ã®çŠ¶æ…‹ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç¢ºèªã§ãã¾ã™ã€‚

### ç¢ºèªæ‰‹é †

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ DevTools ã‚’é–‹ãï¼ˆå³ã‚¯ãƒªãƒƒã‚¯ â†’ æ¤œè¨¼ï¼‰
2. **Elements** ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
3. è¦ç´ ã«ã‚«ãƒ¼ã‚½ãƒ«ã‚’åˆã‚ã›ã‚‹ã¨ã€ãƒšãƒ¼ã‚¸ä¸Šã§ãƒã‚¤ãƒ©ã‚¤ãƒˆã•ã‚Œã‚‹
4. Console ã§ `document.getElementById("...")` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€Elements ã§è©²å½“è¦ç´ ãŒãƒã‚¤ãƒ©ã‚¤ãƒˆã•ã‚Œã‚‹

### ã‚„ã£ã¦ã¿ã‚ˆã†

Console ã§ä»¥ä¸‹ã‚’è©¦ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

```javascript
// è¦ç´ ã‚’å–å¾—ã—ã¦ Console ã«è¡¨ç¤º
const body = document.querySelector("body");
console.log(body); // Elements ã‚¿ãƒ–ã§ç¢ºèªã§ãã‚‹

// è¦ç´ ã‚’å‹•çš„ã«å¤‰æ›´
document.body.style.backgroundColor = "lightblue";
```

> ğŸ’¡ **Elements ã‚¿ãƒ–**ã§ã¯ã€HTML ã®æ§‹é€ ã‚’ç¢ºèªã—ãŸã‚Šã€ä¸€æ™‚çš„ã« CSS ã‚’å¤‰æ›´ã—ã¦è¡¨ç¤ºã‚’ç¢ºã‹ã‚ãŸã‚Šã§ãã¾ã™ã€‚

## ã¾ã¨ã‚

- **DOM** ã¯ HTML ã‚’ JavaScript ã‹ã‚‰æ“ä½œã™ã‚‹ä»•çµ„ã¿
- **querySelector** ã§è¦ç´ ã‚’å–å¾—
- **textContent / innerHTML** ã§å†…å®¹ã‚’å¤‰æ›´
- **classList** ã§ã‚¯ãƒ©ã‚¹ã‚’æ“ä½œ
- **createElement** ã§è¦ç´ ã‚’ä½œæˆ
- **addEventListener** ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å‡¦ç†
- **React ã§ã¯ç›´æ¥ DOM æ“ä½œã—ãªã„**

---

## ğŸ”— æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

DOM æ“ä½œãŒã‚ã‹ã£ãŸã‚‰ã€[localStorage ã§ä¿å­˜ã™ã‚‹](./02-16_localStorageã§ä¿å­˜ã™ã‚‹.md) ã«é€²ã¿ã¾ã—ã‚‡ã†ï¼
