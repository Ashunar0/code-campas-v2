
> ğŸ“Œ **ã“ã®è¨˜äº‹ã§å­¦ã¶ã“ã¨**
>
> - æœ¬ã®ä¸€è¦§ãƒ»è¿½åŠ ãƒ»ç·¨é›†ãƒ»å‰Šé™¤
> - ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½
> - æ˜Ÿ 5 æ®µéšè©•ä¾¡

## å®Œæˆã‚¤ãƒ¡ãƒ¼ã‚¸

{/*
ğŸ“¸ ç”»åƒãƒ¡ãƒ¢: ãƒ–ãƒƒã‚¯ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ—ãƒªã®å®Œæˆç”»é¢
*/}

æ©Ÿèƒ½ï¼š

- æœ¬ã®ä¸€è¦§è¡¨ç¤º
- æœ¬ã®è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ 
- ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®æŠ•ç¨¿
- è©•ä¾¡ï¼ˆæ˜Ÿ 5 æ®µéšï¼‰
- æ¤œç´¢æ©Ÿèƒ½

## Step 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æº–å‚™

```bash
cd ~/Desktop/webex
npm create vite@latest book-review -- --template react
cd book-review
npm install
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

Tailwind ã®è¨­å®šã¯å‰ã®è¨˜äº‹ã¨åŒæ§˜ã§ã™ã€‚

## Step 2: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã‚’ä½œæˆ

**src/hooks/useBooks.js**

```jsx
import { useState, useEffect } from "react";

const STORAGE_KEY = "books";

export function useBooks() {
  const [books, setBooks] = useState(() => {
    const saved = localStorage.getItem(STORAGE_KEY);
    return saved ? JSON.parse(saved) : [];
  });

  useEffect(() => {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(books));
  }, [books]);

  const addBook = (bookData) => {
    const newBook = {
      id: crypto.randomUUID(),
      ...bookData,
      reviews: [],
      createdAt: Date.now(),
    };
    setBooks([...books, newBook]);
  };

  const updateBook = (id, updates) => {
    setBooks(books.map((b) => (b.id === id ? { ...b, ...updates } : b)));
  };

  const deleteBook = (id) => {
    if (confirm("ã“ã®æœ¬ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) {
      setBooks(books.filter((b) => b.id !== id));
    }
  };

  const addReview = (bookId, review) => {
    setBooks(
      books.map((b) => {
        if (b.id === bookId) {
          return {
            ...b,
            reviews: [
              ...b.reviews,
              { id: crypto.randomUUID(), ...review, createdAt: Date.now() },
            ],
          };
        }
        return b;
      })
    );
  };

  return { books, addBook, updateBook, deleteBook, addReview };
}
```

## Step 3: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ

**src/components/StarRating.jsx**

```jsx
export default function StarRating({ rating, onRate, readonly = false }) {
  return (
    <div className="flex gap-1">
      {[1, 2, 3, 4, 5].map((star) => (
        <button
          key={star}
          type="button"
          onClick={() => !readonly && onRate?.(star)}
          disabled={readonly}
          className={`text-2xl ${
            star <= rating ? "text-yellow-400" : "text-gray-300"
          } ${!readonly && "cursor-pointer hover:scale-110 transition"}`}
        >
          â˜…
        </button>
      ))}
    </div>
  );
}
```

**src/components/BookForm.jsx**

```jsx
import { useState } from "react";

export default function BookForm({ onAdd }) {
  const [formData, setFormData] = useState({
    title: "",
    author: "",
    description: "",
  });

  const handleChange = (e) => {
    setFormData({ ...formData, [e.target.name]: e.target.value });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    if (!formData.title.trim()) return;
    onAdd(formData);
    setFormData({ title: "", author: "", description: "" });
  };

  return (
    <form
      onSubmit={handleSubmit}
      className="bg-white p-6 rounded-lg shadow mb-6"
    >
      <h2 className="text-lg font-bold mb-4">ğŸ“š æœ¬ã‚’è¿½åŠ </h2>
      <div className="space-y-4">
        <input
          name="title"
          value={formData.title}
          onChange={handleChange}
          placeholder="ã‚¿ã‚¤ãƒˆãƒ«"
          className="w-full px-4 py-2 border rounded-lg"
          required
        />
        <input
          name="author"
          value={formData.author}
          onChange={handleChange}
          placeholder="è‘—è€…"
          className="w-full px-4 py-2 border rounded-lg"
        />
        <textarea
          name="description"
          value={formData.description}
          onChange={handleChange}
          placeholder="èª¬æ˜"
          className="w-full px-4 py-2 border rounded-lg"
          rows={3}
        />
        <button
          type="submit"
          className="w-full py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
        >
          è¿½åŠ 
        </button>
      </div>
    </form>
  );
}
```

**src/components/ReviewForm.jsx**

```jsx
import { useState } from "react";
import StarRating from "./StarRating";

export default function ReviewForm({ onSubmit }) {
  const [rating, setRating] = useState(0);
  const [comment, setComment] = useState("");

  const handleSubmit = (e) => {
    e.preventDefault();
    if (!rating) return alert("è©•ä¾¡ã‚’é¸æŠã—ã¦ãã ã•ã„");
    onSubmit({ rating, comment });
    setRating(0);
    setComment("");
  };

  return (
    <form onSubmit={handleSubmit} className="bg-gray-50 p-4 rounded-lg">
      <h3 className="font-bold mb-2">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æŠ•ç¨¿</h3>
      <div className="mb-2">
        <StarRating rating={rating} onRate={setRating} />
      </div>
      <textarea
        value={comment}
        onChange={(e) => setComment(e.target.value)}
        placeholder="ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆä»»æ„ï¼‰"
        className="w-full px-3 py-2 border rounded mb-2"
        rows={2}
      />
      <button
        type="submit"
        className="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"
      >
        æŠ•ç¨¿
      </button>
    </form>
  );
}
```

**src/components/BookCard.jsx**

```jsx
import { useState } from "react";
import StarRating from "./StarRating";
import ReviewForm from "./ReviewForm";

export default function BookCard({ book, onDelete, onAddReview }) {
  const [showReviews, setShowReviews] = useState(false);

  const avgRating =
    book.reviews.length > 0
      ? book.reviews.reduce((sum, r) => sum + r.rating, 0) / book.reviews.length
      : 0;

  return (
    <div className="bg-white rounded-lg shadow p-6">
      <div className="flex justify-between items-start mb-2">
        <h3 className="text-xl font-bold">{book.title}</h3>
        <button
          onClick={() => onDelete(book.id)}
          className="text-red-500 hover:text-red-700"
        >
          å‰Šé™¤
        </button>
      </div>

      {book.author && <p className="text-gray-600 mb-2">è‘—è€…: {book.author}</p>}
      {book.description && (
        <p className="text-gray-500 mb-4">{book.description}</p>
      )}

      <div className="flex items-center gap-2 mb-4">
        <StarRating rating={Math.round(avgRating)} readonly />
        <span className="text-gray-500">
          ({book.reviews.length} ä»¶ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼)
        </span>
      </div>

      <button
        onClick={() => setShowReviews(!showReviews)}
        className="text-blue-500 hover:underline"
      >
        {showReviews ? "é–‰ã˜ã‚‹" : "ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¦‹ã‚‹"}
      </button>

      {showReviews && (
        <div className="mt-4 space-y-4">
          {book.reviews.map((review) => (
            <div key={review.id} className="border-t pt-3">
              <StarRating rating={review.rating} readonly />
              {review.comment && <p className="mt-1">{review.comment}</p>}
            </div>
          ))}
          <ReviewForm onSubmit={(review) => onAddReview(book.id, review)} />
        </div>
      )}
    </div>
  );
}
```

## Step 4: App.jsx ã‚’å®Œæˆ

**src/App.jsx**

```jsx
import { useState, useMemo } from "react";
import { useBooks } from "./hooks/useBooks";
import BookForm from "./components/BookForm";
import BookCard from "./components/BookCard";

function App() {
  const { books, addBook, deleteBook, addReview } = useBooks();
  const [searchTerm, setSearchTerm] = useState("");

  const filteredBooks = useMemo(() => {
    return books.filter(
      (book) =>
        book.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
        book.author.toLowerCase().includes(searchTerm.toLowerCase())
    );
  }, [books, searchTerm]);

  return (
    <div className="min-h-screen bg-gray-100 py-8">
      <div className="max-w-3xl mx-auto px-4">
        <h1 className="text-3xl font-bold text-center mb-8">
          ğŸ“– ãƒ–ãƒƒã‚¯ãƒ¬ãƒ“ãƒ¥ãƒ¼
        </h1>

        <BookForm onAdd={addBook} />

        <input
          type="text"
          value={searchTerm}
          onChange={(e) => setSearchTerm(e.target.value)}
          placeholder="æœ¬ã‚’æ¤œç´¢..."
          className="w-full px-4 py-2 border rounded-lg mb-6"
        />

        <div className="space-y-6">
          {filteredBooks.length === 0 ? (
            <p className="text-center text-gray-500 py-8">æœ¬ãŒã‚ã‚Šã¾ã›ã‚“</p>
          ) : (
            filteredBooks.map((book) => (
              <BookCard
                key={book.id}
                book={book}
                onDelete={deleteBook}
                onAddReview={addReview}
              />
            ))
          )}
        </div>
      </div>
    </div>
  );
}

export default App;
```

## ãƒã‚¤ãƒ³ãƒˆè§£èª¬

### ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿

æœ¬ã®ä¸­ã«ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®é…åˆ—ãŒã‚ã‚‹ã€Œãƒã‚¹ãƒˆæ§‹é€ ã€ã‚’æ›´æ–°ã™ã‚‹ä¾‹ã§ã™ã€‚

```jsx
const addReview = (bookId, review) => {
  setBooks(
    books.map((b) => {
      if (b.id === bookId) {
        return {
          ...b,
          reviews: [...b.reviews, { id: crypto.randomUUID(), ...review }],
        };
      }
      return b;
    })
  );
};
```

> ğŸ’¡ **ãƒã‚¹ãƒˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿æ›´æ–°ã®ã‚³ãƒ„**
>
> 1. `map` ã§å¯¾è±¡ã®æœ¬ã‚’è¦‹ã¤ã‘ã‚‹
> 2. ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰æ§‹æ–‡ã§æœ¬ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆ`...b`ï¼‰
> 3. `reviews` é…åˆ—ã‚‚ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã§æ–°è¦è¿½åŠ ï¼ˆ`[...b.reviews, æ–°ãƒ¬ãƒ“ãƒ¥ãƒ¼]`ï¼‰
>
> **å…ƒã®ãƒ‡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã›ãšã€å¸¸ã«æ–°ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚‹**ã®ãŒãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚

### å¹³å‡è©•ä¾¡ã®è¨ˆç®—

```jsx
const avgRating =
  book.reviews.length > 0
    ? book.reviews.reduce((sum, r) => sum + r.rating, 0) / book.reviews.length
    : 0;
```

## ç™ºå±•èª²é¡Œ

1. **ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ç·¨é›†ãƒ»å‰Šé™¤**
2. **è©•ä¾¡é †ã§ã‚½ãƒ¼ãƒˆ**
3. **React Router** ã§è©³ç´°ãƒšãƒ¼ã‚¸
4. **ã‚«ãƒ†ã‚´ãƒª**ã§åˆ†é¡

## ã¾ã¨ã‚

- **æœ¬ã¨ãƒ¬ãƒ“ãƒ¥ãƒ¼**ã®ãƒã‚¹ãƒˆã—ãŸãƒ‡ãƒ¼ã‚¿æ§‹é€ 
- **æ˜Ÿè©•ä¾¡**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **CRUD** ã®å®Ÿè£…
- **æ¤œç´¢æ©Ÿèƒ½**

> ğŸ’¡ **æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—**
> ã“ã®ã‚¢ãƒ—ãƒªã« Firebase ã‚’é€£æºã™ã‚‹ã¨ã€**è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§å…±æœ‰**ã§ãã‚‹ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚µã‚¤ãƒˆã«ãªã‚Šã¾ã™ï¼

---

## ğŸ”— æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ãƒ–ãƒƒã‚¯ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ—ãƒªãŒã§ããŸã‚‰ã€ã¾ã¨ã‚ã¨æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— ã«é€²ã¿ã¾ã—ã‚‡ã†ï¼
