
> ğŸ“Œ **ã“ã®è¨˜äº‹ã§å­¦ã¶ã“ã¨**
>
> - Controlled Component ã®å¾©ç¿’
> - Uncontrolled Component ã¨ã®é•ã„
> - è¤‡æ•°ã® input ã‚’ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ç®¡ç†

## Controlled Component ã¨ã¯ï¼Ÿ

**Controlled Component** ã¯ã€ãƒ•ã‚©ãƒ¼ãƒ ã®å€¤ã‚’ **State ã§ç®¡ç†** ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚

```jsx
const [name, setName] = useState("");

<input type="text" value={name} onChange={(e) => setName(e.target.value)} />;
```

- `value` : State ã®å€¤ã‚’è¡¨ç¤º
- `onChange` : State ã‚’æ›´æ–°

React ãŒå…¥åŠ›å€¤ã‚’**å®Œå…¨ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«**ã—ã¦ã„ã¾ã™ã€‚

### ãªãœ Controlled Component ã‚’ä½¿ã†ã®ã‹ï¼Ÿ

**React ã®è€ƒãˆæ–¹**ã¯ã€ŒUI ã¯ State ã®é–¢æ•°ã€ã§ã™ã€‚
State ãŒå¤‰ã‚ã‚Œã° UI ãŒå¤‰ã‚ã‚‹ã€ã¨ã„ã†ä¸€æ–¹å‘ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’ä¿ã¤ã“ã¨ã§ï¼š

- **ãƒã‚°ãŒèµ·ãã«ãã„**ï¼ˆã©ã“ã§å€¤ãŒå¤‰ã‚ã£ãŸã‹è¿½è·¡ã—ã‚„ã™ã„ï¼‰
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†ãŒã—ã‚„ã™ã„**ï¼ˆå…¥åŠ›ä¸­ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ï¼‰
- **è¤‡é›‘ãªãƒ•ã‚©ãƒ¼ãƒ ã‚‚ç®¡ç†ã—ã‚„ã™ã„**ï¼ˆè¤‡æ•°ã®å…¥åŠ›ã‚’ 1 ã¤ã® State ã«ã¾ã¨ã‚ã‚‰ã‚Œã‚‹ï¼‰

> ğŸ’¡ Controlled Component ã¯ã€ŒReact ã«å…¥åŠ›å€¤ã‚’ä»»ã›ã‚‹ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚
> DOM ãŒå‹æ‰‹ã«å€¤ã‚’æŒã¤ã®ã§ã¯ãªãã€**State ãŒå”¯ä¸€ã®æƒ…å ±æºï¼ˆSingle Source of Truthï¼‰** ã«ãªã‚Šã¾ã™ã€‚

## Uncontrolled Component ã¨ã®é•ã„

### Uncontrolled Component

DOM ãŒå€¤ã‚’ç®¡ç†ã—ã€å¿…è¦ãªã¨ãã« `ref` ã§å–å¾—ã—ã¾ã™ã€‚

```jsx
const inputRef = useRef(null);

const handleSubmit = () => {
  console.log(inputRef.current.value);
};

<input type="text" ref={inputRef} />;
```

### æ¯”è¼ƒ

|                  | Controlled     | Uncontrolled   |
| ---------------- | -------------- | -------------- |
| å€¤ã®ç®¡ç†         | Reactï¼ˆStateï¼‰ | DOM            |
| ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç† | â­• ã§ãã‚‹      | â–³ é›£ã—ã„       |
| ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³   | â­• å®¹æ˜“        | â–³ é¢å€’         |
| æ¨å¥¨åº¦           | â­• æ¨å¥¨        | ç‰¹æ®Šãªå ´åˆã®ã¿ |

> ğŸ’¡ é€šå¸¸ã¯ **Controlled Component** ã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€‚

## è¤‡æ•°ã® input ã‚’å€‹åˆ¥ç®¡ç†

```jsx
const [name, setName] = useState("");
const [email, setEmail] = useState("");
const [message, setMessage] = useState("");

return (
  <form>
    <input value={name} onChange={(e) => setName(e.target.value)} />
    <input value={email} onChange={(e) => setEmail(e.target.value)} />
    <textarea value={message} onChange={(e) => setMessage(e.target.value)} />
  </form>
);
```

é …ç›®ãŒå¢—ãˆã‚‹ã¨ State ãŒå¢—ãˆã¦å¤§å¤‰...

## ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ State ã‚’ç®¡ç†

ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ **1 ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ** ã«ã¾ã¨ã‚ã¾ã™ã€‚

```jsx
const [formData, setFormData] = useState({
  name: "",
  email: "",
  message: "",
});

const handleChange = (e) => {
  const { name, value } = e.target;
  setFormData({
    ...formData,
    [name]: value,
  });
};

return (
  <form>
    <input name="name" value={formData.name} onChange={handleChange} />
    <input name="email" value={formData.email} onChange={handleChange} />
    <textarea name="message" value={formData.message} onChange={handleChange} />
  </form>
);
```

### ãƒã‚¤ãƒ³ãƒˆ

- input ã« `name` å±æ€§ã‚’è¨­å®š
- `e.target.name` ã§ ã©ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‹åˆ¤å®š
- `[name]: value` ã§ å‹•çš„ã«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æ›´æ–°

> ğŸ’¡ `[name]: value` ã¯**è¨ˆç®—ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åï¼ˆComputed Property Nameï¼‰** ã¨ã„ã† JavaScript ã®æ§‹æ–‡ã§ã™ã€‚
> å¤‰æ•° `name` ã®å€¤ãŒ `"email"` ãªã‚‰ `{ email: value }` ã¨åŒã˜æ„å‘³ã«ãªã‚Šã¾ã™ã€‚

## æ§˜ã€…ãª input ã‚¿ã‚¤ãƒ—

### checkbox

```jsx
const [formData, setFormData] = useState({
  name: "",
  isAgree: false,
});

const handleChange = (e) => {
  const { name, value, type, checked } = e.target;
  setFormData({
    ...formData,
    [name]: type === "checkbox" ? checked : value,
  });
};

<input
  type="checkbox"
  name="isAgree"
  checked={formData.isAgree}
  onChange={handleChange}
/>;
```

### select

```jsx
const [formData, setFormData] = useState({
  category: "",
});

<select name="category" value={formData.category} onChange={handleChange}>
  <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
  <option value="tech">æŠ€è¡“</option>
  <option value="life">ç”Ÿæ´»</option>
</select>;
```

## ãƒ•ã‚©ãƒ¼ãƒ ã®ãƒªã‚»ãƒƒãƒˆ

```jsx
const initialState = {
  name: "",
  email: "",
  message: "",
};

const [formData, setFormData] = useState(initialState);

const handleReset = () => {
  setFormData(initialState);
};

<button type="button" onClick={handleReset}>
  ãƒªã‚»ãƒƒãƒˆ
</button>;
```

## å®Ÿè·µä¾‹ï¼šãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ 

```jsx
import { useState } from "react";

function ContactForm() {
  const initialState = {
    name: "",
    email: "",
    category: "",
    message: "",
    isAgree: false,
  };

  const [formData, setFormData] = useState(initialState);

  const handleChange = (e) => {
    const { name, value, type, checked } = e.target;
    setFormData({
      ...formData,
      [name]: type === "checkbox" ? checked : value,
    });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log("é€ä¿¡ãƒ‡ãƒ¼ã‚¿:", formData);
    // é€ä¿¡å‡¦ç†...
    setFormData(initialState);
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label>åå‰</label>
        <input
          type="text"
          name="name"
          value={formData.name}
          onChange={handleChange}
        />
      </div>

      <div>
        <label>ãƒ¡ãƒ¼ãƒ«</label>
        <input
          type="email"
          name="email"
          value={formData.email}
          onChange={handleChange}
        />
      </div>

      <div>
        <label>ã‚«ãƒ†ã‚´ãƒª</label>
        <select
          name="category"
          value={formData.category}
          onChange={handleChange}
        >
          <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
          <option value="question">è³ªå•</option>
          <option value="feedback">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</option>
          <option value="other">ãã®ä»–</option>
        </select>
      </div>

      <div>
        <label>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</label>
        <textarea
          name="message"
          value={formData.message}
          onChange={handleChange}
        />
      </div>

      <div>
        <label>
          <input
            type="checkbox"
            name="isAgree"
            checked={formData.isAgree}
            onChange={handleChange}
          />
          åˆ©ç”¨è¦ç´„ã«åŒæ„ã™ã‚‹
        </label>
      </div>

      <button type="submit" disabled={!formData.isAgree}>
        é€ä¿¡
      </button>
    </form>
  );
}
```

## ã¾ã¨ã‚

- **Controlled Component** ã§ React ãŒãƒ•ã‚©ãƒ¼ãƒ ã‚’å®Œå…¨ã«ç®¡ç†
- è¤‡æ•°ã® input ã¯ **1 ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ** ã«ã¾ã¨ã‚ã‚‹ã¨ä¾¿åˆ©
- `name` å±æ€§ã¨ `[name]: value` ã§å‹•çš„ã«æ›´æ–°
- checkbox ã¯ `checked` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ã†
- **ãƒªã‚»ãƒƒãƒˆ**ã¯åˆæœŸå€¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ä¸Šæ›¸ã

## ã‚ˆãã‚ã‚‹é–“é•ã„

### value ã¨ defaultValue ã®æ··åŒ

```jsx
// âŒ Controlled ã¨ Uncontrolled ã®æ··åœ¨ï¼ˆè­¦å‘ŠãŒå‡ºã‚‹ï¼‰
<input value={text} />  // onChange ãŒãªã„ï¼

// âŒ defaultValue ã¯ Uncontrolled ç”¨
<input defaultValue="åˆæœŸå€¤" onChange={(e) => setText(e.target.value)} />

// â­• Controlled ã¯ value + onChange ã®ã‚»ãƒƒãƒˆ
<input value={text} onChange={(e) => setText(e.target.value)} />
```

### checkbox ã§ value ã‚’ä½¿ã£ã¦ã—ã¾ã†

```jsx
// âŒ checkbox ã¯ value ã§ã¯ãªã checked
<input type="checkbox" value={isChecked} />

// â­• checked ã‚’ä½¿ã†
<input type="checkbox" checked={isChecked} onChange={...} />
```

## ç·´ç¿’å•é¡Œ

ä»¥ä¸‹ã®ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

1. åå‰ï¼ˆå¿…é ˆï¼‰ã€ãƒ¡ãƒ¼ãƒ«ã€é›»è©±ç•ªå·ã€ãŠå•ã„åˆã‚ã›ç¨®åˆ¥ï¼ˆselectï¼‰ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆtextareaï¼‰
2. ã™ã¹ã¦ã‚’ 1 ã¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ State ã§ç®¡ç†
3. ã€Œé€ä¿¡ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸã‚‰ Console ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
4. ã€Œãƒªã‚»ãƒƒãƒˆã€ãƒœã‚¿ãƒ³ã§ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢

### å›ç­”ä¾‹

```jsx
import { useState } from "react";

function ContactForm() {
  const initialState = {
    name: "",
    email: "",
    phone: "",
    type: "",
    message: "",
  };

  const [formData, setFormData] = useState(initialState);

  const handleChange = (e) => {
    const { name, value } = e.target;
    setFormData({ ...formData, [name]: value });
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log("é€ä¿¡ãƒ‡ãƒ¼ã‚¿:", formData);
  };

  const handleReset = () => {
    setFormData(initialState);
  };

  return (
    <form onSubmit={handleSubmit}>
      <input
        name="name"
        value={formData.name}
        onChange={handleChange}
        placeholder="åå‰"
      />
      <input
        name="email"
        value={formData.email}
        onChange={handleChange}
        placeholder="ãƒ¡ãƒ¼ãƒ«"
      />
      <input
        name="phone"
        value={formData.phone}
        onChange={handleChange}
        placeholder="é›»è©±ç•ªå·"
      />
      <select name="type" value={formData.type} onChange={handleChange}>
        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
        <option value="question">è³ªå•</option>
        <option value="request">ä¾é ¼</option>
      </select>
      <textarea
        name="message"
        value={formData.message}
        onChange={handleChange}
      />
      <button type="submit">é€ä¿¡</button>
      <button type="button" onClick={handleReset}>
        ãƒªã‚»ãƒƒãƒˆ
      </button>
    </form>
  );
}
```

---

## ğŸ”— æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

Controlled Component ãŒã‚ã‹ã£ãŸã‚‰ã€ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ ã«é€²ã¿ã¾ã—ã‚‡ã†ï¼
