
> ğŸ“Œ **ã“ã®è¨˜äº‹ã§å­¦ã¶ã“ã¨**
>
> - ãƒ¢ãƒ¼ãƒ€ãƒ«ã®é–‹é–‰çŠ¶æ…‹ç®¡ç†
> - ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ
> - å¤–å´ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
> - ESC ã‚­ãƒ¼ã§é–‰ã˜ã‚‹

## ãƒ¢ãƒ¼ãƒ€ãƒ«ã¨ã¯ï¼Ÿ

**ãƒ¢ãƒ¼ãƒ€ãƒ«**ã¯ã€ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä¸Šã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§ã™ã€‚

- ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
- ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
- è©³ç´°è¡¨ç¤º

## åŸºæœ¬çš„ãªãƒ¢ãƒ¼ãƒ€ãƒ«

### é–‹é–‰çŠ¶æ…‹ã®ç®¡ç†

```jsx
const [isOpen, setIsOpen] = useState(false);

const openModal = () => setIsOpen(true);
const closeModal = () => setIsOpen(false);
```

### ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```jsx
function Modal({ isOpen, onClose, children }) {
  if (!isOpen) return null;

  return (
    <div className="modal-overlay">
      <div className="modal-content">
        <button className="modal-close" onClick={onClose}>
          Ã—
        </button>
        {children}
      </div>
    </div>
  );
}
```

### ä½¿ç”¨ä¾‹

```jsx
function App() {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <div>
      <button onClick={() => setIsOpen(true)}>ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã</button>

      <Modal isOpen={isOpen} onClose={() => setIsOpen(false)}>
        <h2>ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¿ã‚¤ãƒˆãƒ«</h2>
        <p>ãƒ¢ãƒ¼ãƒ€ãƒ«ã®å†…å®¹</p>
      </Modal>
    </div>
  );
}
```

## ã‚¹ã‚¿ã‚¤ãƒ«

```css
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.modal-content {
  background: white;
  padding: 24px;
  border-radius: 8px;
  max-width: 500px;
  width: 90%;
  position: relative;
}

.modal-close {
  position: absolute;
  top: 8px;
  right: 8px;
  border: none;
  background: none;
  font-size: 24px;
  cursor: pointer;
}
```

## å¤–å´ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹

```jsx
function Modal({ isOpen, onClose, children }) {
  if (!isOpen) return null;

  const handleOverlayClick = (e) => {
    // overlayè‡ªä½“ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸå ´åˆã®ã¿é–‰ã˜ã‚‹
    if (e.target === e.currentTarget) {
      onClose();
    }
  };

  return (
    <div className="modal-overlay" onClick={handleOverlayClick}>
      <div className="modal-content">
        <button className="modal-close" onClick={onClose}>
          Ã—
        </button>
        {children}
      </div>
    </div>
  );
}
```

> ğŸ’¡ **`e.target` vs `e.currentTarget`**
>
> - `e.target`: å®Ÿéš›ã«ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸè¦ç´ 
> - `e.currentTarget`: ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãŒä»˜ã„ã¦ã„ã‚‹è¦ç´ 
>
> å­è¦ç´ ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«å†…å®¹ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã«é–‰ã˜ãªã„ã‚ˆã†ã«ã€ã“ã®æ¯”è¼ƒãŒå¿…è¦ã§ã™ã€‚

## ESC ã‚­ãƒ¼ã§é–‰ã˜ã‚‹

```jsx
import { useEffect } from "react";

function Modal({ isOpen, onClose, children }) {
  useEffect(() => {
    const handleEsc = (e) => {
      if (e.key === "Escape") {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener("keydown", handleEsc);
    }

    return () => {
      document.removeEventListener("keydown", handleEsc);
    };
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  // çœç•¥...
}
```

## ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ­ãƒƒã‚¯

ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒé–‹ã„ã¦ã„ã‚‹ã¨ãã€èƒŒæ™¯ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚’ç„¡åŠ¹ã«ã—ã¾ã™ã€‚

```jsx
useEffect(() => {
  if (isOpen) {
    document.body.style.overflow = "hidden";
  } else {
    document.body.style.overflow = "unset";
  }

  return () => {
    document.body.style.overflow = "unset";
  };
}, [isOpen]);
```

## å®Œæˆç‰ˆãƒ¢ãƒ¼ãƒ€ãƒ«

```jsx
import { useEffect } from "react";

function Modal({ isOpen, onClose, title, children }) {
  // ESC ã‚­ãƒ¼ã§é–‰ã˜ã‚‹
  useEffect(() => {
    const handleEsc = (e) => {
      if (e.key === "Escape") onClose();
    };
    if (isOpen) {
      document.addEventListener("keydown", handleEsc);
      document.body.style.overflow = "hidden";
    }
    return () => {
      document.removeEventListener("keydown", handleEsc);
      document.body.style.overflow = "unset";
    };
  }, [isOpen, onClose]);

  if (!isOpen) return null;

  return (
    <div
      className="modal-overlay"
      onClick={(e) => e.target === e.currentTarget && onClose()}
    >
      <div className="modal-content">
        <div className="modal-header">
          <h2>{title}</h2>
          <button className="modal-close" onClick={onClose}>
            Ã—
          </button>
        </div>
        <div className="modal-body">{children}</div>
      </div>
    </div>
  );
}

export default Modal;
```

## å®Ÿè·µä¾‹ï¼šç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«

```jsx
function TodoApp() {
  const [todos, setTodos] = useState([]);
  const [editingTodo, setEditingTodo] = useState(null);

  const openEditModal = (todo) => {
    setEditingTodo(todo);
  };

  const closeEditModal = () => {
    setEditingTodo(null);
  };

  const saveTodo = (id, newText) => {
    setTodos(todos.map((t) => (t.id === id ? { ...t, text: newText } : t)));
    closeEditModal();
  };

  return (
    <div>
      <ul>
        {todos.map((todo) => (
          <li key={todo.id}>
            {todo.text}
            <button onClick={() => openEditModal(todo)}>ç·¨é›†</button>
          </li>
        ))}
      </ul>

      <Modal
        isOpen={editingTodo !== null}
        onClose={closeEditModal}
        title="ã‚¿ã‚¹ã‚¯ã‚’ç·¨é›†"
      >
        {editingTodo && (
          <EditForm
            todo={editingTodo}
            onSave={saveTodo}
            onCancel={closeEditModal}
          />
        )}
      </Modal>
    </div>
  );
}

function EditForm({ todo, onSave, onCancel }) {
  const [text, setText] = useState(todo.text);

  const handleSubmit = (e) => {
    e.preventDefault();
    onSave(todo.id, text);
  };

  return (
    <form onSubmit={handleSubmit}>
      <input value={text} onChange={(e) => setText(e.target.value)} />
      <div>
        <button type="button" onClick={onCancel}>
          ã‚­ãƒ£ãƒ³ã‚»ãƒ«
        </button>
        <button type="submit">ä¿å­˜</button>
      </div>
    </form>
  );
}
```

## ã¾ã¨ã‚

- **useState** ã§ãƒ¢ãƒ¼ãƒ€ãƒ«ã®é–‹é–‰ã‚’ç®¡ç†
- **Portal** ã‚’ä½¿ã†ã¨ã‚ˆã‚Šå …ç‰¢ï¼ˆç™ºå±•ï¼‰
- **å¤–å´ã‚¯ãƒªãƒƒã‚¯**ã¨ **ESC ã‚­ãƒ¼**ã§é–‰ã˜ã‚‹
- **ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ­ãƒƒã‚¯**ã§èƒŒæ™¯å›ºå®š
- ç·¨é›†å¯¾è±¡ã‚’ State ã§ä¿æŒã—ã¦ãƒ¢ãƒ¼ãƒ€ãƒ«ã«æ¸¡ã™

> ğŸ’¡ **Portal ã¨ã¯ï¼Ÿ** > `ReactDOM.createPortal()` ã‚’ä½¿ã†ã¨ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ DOM ãƒ„ãƒªãƒ¼ã®åˆ¥ã®å ´æ‰€ï¼ˆä¾‹: `body` ç›´ä¸‹ï¼‰ã«ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã§ãã¾ã™ã€‚
> CSS ã® `z-index` ã‚„ `overflow` ã®å•é¡Œã‚’å›é¿ã§ãã¾ã™ãŒã€åŸºæœ¬çš„ãªãƒ¢ãƒ¼ãƒ€ãƒ«ãªã‚‰ä¸Šè¨˜ã®å®Ÿè£…ã§ååˆ†ã§ã™ã€‚

{/*
ğŸ“¸ ç”»åƒãƒ¡ãƒ¢: ãƒ¢ãƒ¼ãƒ€ãƒ«ã®æ§‹é€ å›³
- èƒŒæ™¯ï¼ˆoverlayï¼‰ãŒç”»é¢å…¨ä½“ã‚’è¦†ã†
- ä¸­å¤®ã«ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„
- Ã— ãƒœã‚¿ãƒ³ãŒå³ä¸Š
*/}

## ç·´ç¿’å•é¡Œ

ä»¥ä¸‹ã®ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’ä½œã£ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

1. ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ãŒé–‹ã
2. ã€Œã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€ã§é–‰ã˜ã‚‹ã€ã€Œå‰Šé™¤ã™ã‚‹ã€ã§å®Ÿè¡Œ
3. å¤–å´ã‚¯ãƒªãƒƒã‚¯ã§ã‚‚é–‰ã˜ã‚‹

### å›ç­”ä¾‹

```jsx
function ConfirmDialog({ isOpen, onClose, onConfirm, message }) {
  if (!isOpen) return null;

  return (
    <div
      className="modal-overlay"
      onClick={(e) => e.target === e.currentTarget && onClose()}
    >
      <div className="modal-content">
        <p>{message}</p>
        <div>
          <button onClick={onClose}>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
          <button onClick={onConfirm}>å‰Šé™¤ã™ã‚‹</button>
        </div>
      </div>
    </div>
  );
}

// ä½¿ç”¨ä¾‹
function App() {
  const [showConfirm, setShowConfirm] = useState(false);
  const [deleteTarget, setDeleteTarget] = useState(null);

  const handleDeleteClick = (item) => {
    setDeleteTarget(item);
    setShowConfirm(true);
  };

  const handleConfirm = () => {
    console.log("å‰Šé™¤:", deleteTarget);
    setShowConfirm(false);
  };

  return (
    <>
      <button onClick={() => handleDeleteClick({ id: 1 })}>å‰Šé™¤</button>
      <ConfirmDialog
        isOpen={showConfirm}
        onClose={() => setShowConfirm(false)}
        onConfirm={handleConfirm}
        message="æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ"
      />
    </>
  );
}
```

---

## ğŸ”— æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒã‚ã‹ã£ãŸã‚‰ã€Tailwind CSS ã‚’ä½¿ã„ã“ãªã™ ã«é€²ã¿ã¾ã—ã‚‡ã†ï¼
