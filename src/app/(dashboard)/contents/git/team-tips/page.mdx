
## この記事で学ぶこと

- main ブランチの保護
- プッシュ前のプル
- こまめなコミット
- Issue ファーストの開発
- コミュニケーションの重要性
- よくある失敗と対策

---

## main ブランチを直接編集しない

### なぜダメなのか

```
main に直接プッシュすると：
├── レビューなしでコードが入る
├── バグがあると全員に影響
├── 変更を追跡しにくい
├── ロールバックが大変
└── 誰が何をしたかわからない
```

### 正しい流れ

```
1. main から feature ブランチを作成
2. feature ブランチで開発
3. プッシュ
4. Pull Request を作成
5. レビューを受ける
6. 承認後にマージ
```

### GitHub で main を保護する

Settings → Branches → Branch protection rules で設定できます。

```
設定項目：
├── Require a pull request before merging
│   └── PR なしでマージ禁止
├── Require approvals
│   └── 承認なしでマージ禁止
├── Require status checks to pass
│   └── テストに通らないとマージ禁止
└── Include administrators
    └── 管理者も例外なし
```

📸 画像メモ: Branch protection rules 設定画面

---

## プッシュ前に必ずプルする

### なぜ必要か

他の人の変更を取り込まないと、コンフリクトやエラーの原因になります。

```bash
# 朝イチで
git checkout main
git pull origin main

# 作業ブランチを最新に
git checkout feature/my-work
git merge main

# または
git rebase main
```

### プルを忘れるとどうなる

```
Aさん: main で作業完了 → プッシュ
Bさん: 古い main で作業 → プッシュしようとする
  ↓
error: Updates were rejected
  ↓
pull してコンフリクト解決が必要
  ↓
時間がかかる...
```

### 習慣にするコツ

```
ルーティン化：
├── 朝パソコンを開いたら git pull
├── 作業を始める前に git pull
├── ミーティング後に git pull
└── プッシュ前に確認
```

---

## コミットは小さく頻繁に

### 良いコミット

```bash
# 小さく意味のある単位でコミット
git commit -m "ログインフォームのUIを作成"
git commit -m "バリデーション機能を追加"
git commit -m "エラーメッセージを表示"
git commit -m "送信ボタンのスタイルを調整"
```

### 悪いコミット

```bash
# 大きすぎる
git commit -m "ログイン機能を追加"  # 1000行の変更

# 意味がわからない
git commit -m "修正"
git commit -m "いろいろ"
git commit -m "wip"

# 関係ない変更が混在
git commit -m "ログインとヘッダーと設定画面を修正"
```

### なぜ小さいコミットが良いか

```
メリット：
├── 問題が起きたとき戻しやすい
├── レビューしやすい
├── 変更履歴が追いやすい
├── コンフリクトが起きにくい
└── 達成感がある
```

---

## Issue ファーストの開発

### Issue を先に作る

```
Issue ファーストの流れ：
1. 何をするか Issue に書く
2. 担当者をアサイン
3. Issue からブランチを作成
4. 開発
5. PR で "fixes #12" と書く
6. マージで Issue が自動クローズ
```

### Issue を作らないとどうなる

```
問題点：
├── 誰が何をしているかわからない
├── 同じ作業をしてしまう
├── 優先順位がわからない
├── 完了したか判断できない
└── 振り返りができない
```

---

## コミュニケーションを大切に

### 確認すべきこと

```
作業前：
├── 誰がどこを編集しているか
├── 自分の担当範囲
├── 期限
├── 依存関係

作業中：
├── 困ったらすぐ相談
├── 進捗を共有
├── 仕様が不明なら確認

作業後：
├── レビュー依頼
├── 完了報告
├── 次のタスクの確認
```

### ツールの活用

| 場面 | ツール |
|:----|:------|
| タスク管理 | GitHub Issues / Projects |
| 進捗共有 | Projects のカンバン |
| 相談・質問 | Slack / Discord |
| コードの議論 | PR のコメント |
| 定期ミーティング | Zoom / Google Meet |

### 報告のテンプレート

```markdown
## 今日の進捗

### やったこと
- ログインフォームのUIを作成（PR #15）
- バリデーション機能を追加

### 明日やること
- エラーメッセージの表示
- APIとの連携

### 困っていること・相談
- 認証トークンの保存方法について相談したい
```

---

## 勝手にマージしない

### レビューを受けてから

```
勝手にマージすると：
├── バグが見逃される
├── 設計の問題に気づかない
├── チームの信頼を失う
├── 後で大きな問題になる
└── 学びの機会を逃す
```

### 緊急の場合は

```
本当に緊急な場合：
├── チームに連絡してから
├── マージ後にすぐ報告
├── 後からでもレビューを受ける
└── 次回から緊急でも事前連絡
```

---

## よくある失敗と対策

### 失敗ケース集

| 失敗 | 原因 | 対策 |
|:----|:----|:----|
| main に直接プッシュ | 習慣・ブランチ保護なし | Branch protection を設定 |
| 古い状態で作業 | pull を忘れる | 毎朝 git pull をルーティンに |
| 大きな PR | 区切りを作らない | 1機能 = 1PR を意識 |
| レビューなしでマージ | 焦り・手続き無視 | 必須レビュー設定 |
| 連絡なしで同じファイル編集 | 共有不足 | 朝会で作業を宣言 |
| コミットメッセージが雑 | 意識不足 | ルールを決めて習慣化 |
| ブランチ名がバラバラ | ルールなし | 命名規則を決める |

### 失敗から学ぶ

```
失敗したとき：
├── 責めない（誰でもミスはする）
├── 原因を分析
├── 再発防止策を考える
├── ルール化・自動化
└── チームで共有
```

---

## ミニ演習

### Try 1: チェックリストを作成する

チーム開発で毎日確認することをリスト化してみましょう：

```markdown
## 毎日のチェックリスト

### 朝
- [ ] 

### 作業中
- [ ] 

### 終業前
- [ ] 
```

### Try 2: 失敗事例を共有する

これまでに遭遇した（または想像できる）失敗事例と対策を書き出してみましょう：

| 失敗 | 対策 |
|:----|:----|
| | |
| | |

---

## まとめ

```
チーム開発の心得：
├── main は直接編集しない
├── プル → 作業 → プッシュ
├── 小さいコミットをこまめに
├── Issue で管理
├── レビューを受ける
├── コミュニケーション第一
└── 失敗から学ぶ
```

### 最重要ポイント

```
✅ 朝イチで git pull
✅ 作業前に Issue を確認
✅ 小さくコミット
✅ 困ったらすぐ相談
✅ レビューを受けてからマージ
```

---

## 次の記事へ

06-18. チーム開発を体験しよう【ハンズオン】
