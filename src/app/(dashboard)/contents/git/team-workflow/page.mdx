
## この記事で学ぶこと

- Git Flow と GitHub Flow の違い
- GitHub Flow の実践
- チームでのルール決め
- 効果的なワークフローの運用

---

## Git Flow と GitHub Flow

### Git Flow

複雑なリリースサイクルを持つプロジェクト向けのワークフローです。

```
ブランチ構成：
├── main: 本番環境
├── develop: 開発用の統合ブランチ
├── feature/*: 機能開発
├── release/*: リリース準備
└── hotfix/*: 緊急修正
```

```
特徴：
├── 大規模プロジェクト向け
├── リリースサイクルが明確
├── 複雑なブランチ構成
└── 学習コストが高い
```

### GitHub Flow（推奨）

シンプルで、すばやくデプロイしたいプロジェクト向けです。

```
ブランチ構成：
├── main: 本番環境（常にデプロイ可能）
└── feature/*: 機能開発・バグ修正
```

```
特徴：
├── シンプルで覚えやすい
├── main は常にデプロイ可能
├── すばやいサイクル
└── 小〜中規模プロジェクト向け
```

**MVP 開発では GitHub Flow を使いましょう。**

---

## GitHub Flow の実践

### 基本ルール

```
5つのルール：
1. main は常にデプロイ可能な状態
2. 新しい作業は main から feature ブランチを作成
3. こまめにコミット・プッシュ
4. Pull Request を作成してレビュー
5. 承認されたら main にマージ
```

### 具体的な流れ

```bash
# 1. main を最新に
git checkout main
git pull origin main

# 2. feature ブランチを作成
git checkout -b feature/add-search

# 3. 開発・コミット（こまめに）
git add .
git commit -m "検索フォームのUIを作成"

git add .
git commit -m "検索ロジックを実装"

# 4. プッシュ
git push -u origin feature/add-search

# 5. GitHub で PR を作成

# 6. レビューを受けてフィードバックを反映

# 7. レビュー後、マージ（GitHub上で）

# 8. ローカルを最新に
git checkout main
git pull origin main

# 9. 不要になったブランチを削除
git branch -d feature/add-search
```

### 図解

```
main:    ○ ─── ○ ─── ○ ─────────── ○ ─── ○
                      \           /
feature:               ○ ─ ○ ─ ○
                       ↑       ↑
                   ブランチ   PR
                     作成    マージ
```

---

## チームでのルール決め

### ブランチ命名規則

```markdown
## ブランチ命名規則

### プレフィックス
- feature/: 新機能
- fix/: バグ修正
- docs/: ドキュメント
- refactor/: リファクタリング
- style/: スタイル修正

### 命名ルール
- 英語小文字とハイフン
- 機能や修正内容がわかる名前
- 例: feature/add-login, fix/header-scroll
```

### コミットメッセージ規約

```markdown
## コミットメッセージ規約

### 日本語の場合
- 「〜を追加」
- 「〜を修正」
- 「〜を削除」
- 「〜を更新」

### 例
- ログインフォームを追加
- ヘッダーのレイアウトを修正
- 不要なコードを削除
- README を更新
```

### PR のルール

```markdown
## Pull Request のルール

### 必須
- [ ] 最低1人のレビューで承認
- [ ] 説明文を必ず書く
- [ ] 関連する Issue を記載

### 推奨
- Draft PR で早めに共有
- スクリーンショットを添付（UI変更時）
- 小さい単位で PR を作成
```

### ルールをどこに書くか

```
プロジェクト/
├── README.md          ← プロジェクト概要
├── CONTRIBUTING.md    ← 開発ルール（ここに書く）
└── ...
```

---

## 効果的なワークフローの運用

### 1日の流れ

```
朝：
├── main を pull して最新を取得
├── Projects で今日のタスクを確認
├── Issue からブランチを作成
└── 開発開始

日中：
├── こまめにコミット
├── 区切りでプッシュ
├── 困ったら早めに相談
└── レビュー依頼があれば対応

夕方：
├── 区切りの良いところでコミット
├── プッシュして終了
├── 進捗を Projects に反映
└── 翌日のタスクを確認
```

### 週の流れ

```
週初め：
├── 今週のゴールを確認
├── タスクの優先順位を決める
├── 担当を確認

週中：
├── 毎日の朝会で進捗共有（5分）
├── 困っていることを共有
├── レビュー・マージを進める

週末：
├── 振り返り
├── 来週の計画
├── ブランチの整理
```

---

## よくある問題と解決策

### 問題1: PR が溜まる

```
原因：
├── レビューが遅い
├── PR が大きすぎる
└── 優先度がわからない

解決策：
├── レビュー時間を設ける（毎日午前など）
├── 小さい PR に分割
├── 急ぎは Slack で連絡
└── 「Ready for Review」ラベルを活用
```

### 問題2: main が壊れる

```
原因：
├── テストせずにマージ
├── レビューが甘い
└── コンフリクト解決ミス

解決策：
├── マージ前にローカルでテスト
├── レビューを丁寧に
├── CI/CD でテストを自動化
└── Branch protection rules を設定
```

### 問題3: ブランチが乱立する

```
原因：
├── マージ後のブランチを削除しない
├── 放置されたブランチがある
└── 命名規則がない

解決策：
├── マージ後は必ず削除
├── 週1回ブランチを整理
├── 命名規則を決める
└── GitHub設定で自動削除を有効化
```

---

## ミニ演習

### Try 1: GitHub Flow を実践する

以下の流れを実際に試してみましょう：

1. リポジトリを作成（または既存のものを使用）
2. `feature/test-workflow` ブランチを作成
3. 簡単な変更を加えてコミット
4. プッシュして PR を作成
5. （自分で）マージして完了

### Try 2: チームルールを作成する

CONTRIBUTING.md のテンプレートを作成してみましょう：

```markdown
# 開発ルール

## ブランチ命名規則
- 

## コミットメッセージ
- 

## Pull Request
- 

## コードレビュー
- 
```

---

## まとめ

```
GitHub Flow のポイント：
├── main は常にデプロイ可能
├── feature ブランチで開発
├── PR でレビューを受ける
├── マージ後はブランチ削除
└── チームでルールを統一
```

### チェックリスト

```
ワークフローのチェック：
- [ ] ブランチ命名規則を決めた
- [ ] コミットメッセージのルールを決めた
- [ ] PR のルールを決めた
- [ ] レビューの担当を決めた
- [ ] CONTRIBUTING.md に記載した
```

---

## 次の記事へ

06-17. チーム開発での注意点
