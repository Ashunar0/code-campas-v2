
## ã“ã®è¨˜äº‹ã§å­¦ã¶ã“ã¨

- Server Component ã§ã® fetch
- async ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ä»•çµ„ã¿

---

## Server Component ã§ã® fetch

### useEffect ä¸è¦ã§ãƒ‡ãƒ¼ã‚¿å–å¾—

Server Component ã§ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ç›´æ¥ `fetch` ã§ãã¾ã™ã€‚

```jsx
// app/posts/page.jsx
async function getPosts() {
  const res = await fetch('https://jsonplaceholder.typicode.com/posts');
  return res.json();
}

export default async function PostsPage() {
  const posts = await getPosts();
  
  return (
    <div className="p-8">
      <h1 className="text-2xl font-bold mb-4">æŠ•ç¨¿ä¸€è¦§</h1>
      <ul className="space-y-4">
        {posts.slice(0, 10).map(post => (
          <li key={post.id} className="border p-4 rounded">
            <h2 className="font-bold">{post.title}</h2>
            <p className="text-gray-600">{post.body}</p>
          </li>
        ))}
      </ul>
    </div>
  );
}
```

### ãƒã‚¤ãƒ³ãƒˆ

- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ `async` é–¢æ•°ã«ã™ã‚‹
- `await` ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
- useEffect, useState ã¯ä¸è¦
- ã‚µãƒ¼ãƒãƒ¼ã§å®Ÿè¡Œã•ã‚Œã‚‹

---

## ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ä»•çµ„ã¿

### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹

```jsx
// çµæœãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹
const res = await fetch('https://api.example.com/data');
```

### å†æ¤œè¨¼ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³

```jsx
// 60ç§’ã”ã¨ã«å†æ¤œè¨¼
const res = await fetch('https://api.example.com/data', {
  next: { revalidate: 60 }
});

// ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ãªã„
const res = await fetch('https://api.example.com/data', {
  cache: 'no-store'
});
```

---

## å®Ÿè·µï¼šJSONPlaceholder API ã‚’ä½¿ã†

```jsx
// app/users/page.jsx
async function getUsers() {
  const res = await fetch('https://jsonplaceholder.typicode.com/users');
  return res.json();
}

export default async function UsersPage() {
  const users = await getUsers();
  
  return (
    <div className="p-8">
      <h1 className="text-2xl font-bold mb-4">ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§</h1>
      <div className="grid grid-cols-2 gap-4">
        {users.map(user => (
          <div key={user.id} className="border p-4 rounded">
            <h2 className="font-bold">{user.name}</h2>
            <p className="text-gray-600">{user.email}</p>
          </div>
        ))}
      </div>
    </div>
  );
}
```

---

## ğŸ¯ Try: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®å‹•ä½œã‚’ç¢ºèª

1. ä¸Šè¨˜ã® Users ãƒšãƒ¼ã‚¸ã‚’ä½œæˆ
2. `revalidate: 10` ã‚’è¨­å®šã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’10ç§’ã”ã¨ã«æ›´æ–°ã™ã‚‹ã‚ˆã†ã«
3. è¤‡æ•°å›ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ãŒã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰è¿”ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª

### ğŸ’¡ ãªãœ useEffect ã‚’ä½¿ã‚ãªã„ã®ã‹ï¼Ÿ

Server Component ã§ã¯ã€**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè‡ªä½“ãŒã‚µãƒ¼ãƒãƒ¼ã§å®Ÿè¡Œã•ã‚Œã‚‹**ãŸã‚ã€ç›´æ¥ `await` ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šï¼š

- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®ç®¡ç†ãŒä¸è¦
- ãƒ‡ãƒ¼ã‚¿ãŒã‚µãƒ¼ãƒãƒ¼ã§å–å¾—ã•ã‚Œã‚‹ãŸã‚é«˜é€Ÿ
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«é€ã‚‹JSã®é‡ãŒæ¸›ã‚‹

---

## ã¾ã¨ã‚

```
Server Component ã§ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒï¼š
â”œâ”€â”€ async ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ await
â”œâ”€â”€ useEffect ãŒä¸è¦
â”œâ”€â”€ ã‚µãƒ¼ãƒãƒ¼ã§å®Ÿè¡Œï¼ˆé«˜é€Ÿï¼‰
â”œâ”€â”€ è‡ªå‹•ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥
â””â”€â”€ revalidate ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ›´æ–°
```

---

## æ¬¡ã®è¨˜äº‹ã¸

07-09. loading.jsx ã¨ error.jsx
